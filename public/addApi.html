<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta content="width=device-width, initial-scale=1.0" name="viewport" />

  <title>Add Api</title>
  <meta content="" name="description" />
  <meta content="" name="keywords" />

  <!-- Favicons -->
  <link href="./img/favicon.png" rel="icon" />

  <!-- Google Fonts -->
  <link href="https://fonts.gstatic.com" rel="preconnect" />
  <link
    href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Nunito:300,300i,400,400i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i"
    rel="stylesheet" />

  <!-- Vendor CSS Files -->
  <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet" />
  <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet" />
  <link href="assets/vendor/boxicons/css/boxicons.min.css" rel="stylesheet" />
  <link href="assets/vendor/quill/quill.snow.css" rel="stylesheet" />
  <link href="assets/vendor/quill/quill.bubble.css" rel="stylesheet" />
  <link href="assets/vendor/remixicon/remixicon.css" rel="stylesheet" />
  <link href="assets/vendor/simple-datatables/style.css" rel="stylesheet" />

  <!-- Template Main CSS File -->
  <link href="assets/css/style.css" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet" />
</head>

<body>
  <!-- ======= Header ======= -->
  <header id="header" class="header fixed-top d-flex align-items-center">
    <i class="bi bi-list toggle-sidebar-btn"></i>

    <div class="d-flex align-items-center justify-content-center" style="padding: 2vw">
      <a href="admindashboard.html" class="logo d-flex align-items-center">
        <img src="./img/logo.png" alt="iotcom" />
      </a>
    </div>
    <!-- End Logo -->

    <div class="search-bar" style="display: none">
      <form class="search-form d-flex align-items-center" method="POST" action="#">
        <input type="text" name="query" placeholder="Search" title="Enter search keyword" />
        <button type="submit" title="Search">
          <i class="bi bi-search"></i>
        </button>
      </form>
    </div>
    <!-- End Search Bar -->

    <nav class="header-nav ms-auto">
      <ul class="d-flex align-items-center">
        <li class="nav-item d-block d-lg-none">
          <a class="nav-link nav-icon search-bar-toggle" href="#" style="display: none">
            <i class="bi bi-search"></i>
          </a>
        </li>
        <!-- End Search Icon-->

        <li class="nav-item dropdown pe-3">
          <a class="nav-link nav-profile d-flex align-items-center pe-0" href="#" data-bs-toggle="dropdown">
            <img src="img/shiv.jpg" alt="Profile" class="rounded-circle" />
            <span class="d-none d-md-block dropdown-toggle ps-2" id="displayUsername"></span>
          </a><!-- End Profile Iamge Icon -->

          <ul class="dropdown-menu dropdown-menu-end dropdown-menu-arrow profile">
            <li class="dropdown-header">
              <h6 id="displayUsername1">Shiv Shekhawat</h6>
              <span id="displayorg">Web Designer</span>
            </li>
            <li>
              <hr class="dropdown-divider" />
            </li>

            <li>
              <a class="dropdown-item d-flex align-items-center" href="users-profile.html">
                <i class="bi bi-person"></i>
                <span>My Profile</span>
              </a>
            </li>
            <li>
              <hr class="dropdown-divider" />
            </li>

            <li>
              <a class="dropdown-item d-flex align-items-center" href="users-profile.html">
                <i class="bi bi-gear"></i>
                <span>Account Settings</span>
              </a>
            </li>
            <li>
              <hr class="dropdown-divider" />
            </li>

            <li>
              <a class="dropdown-item d-flex align-items-center" href="pages-faq.html">
                <i class="bi bi-question-circle"></i>
                <span>Need Help?</span>
              </a>
            </li>
            <li>
              <hr class="dropdown-divider" />
            </li>

            <li>
              <a class="dropdown-item d-flex align-items-center" href="#" onclick="signOut()">
                <i class="bi bi-box-arrow-right"></i>
                <span>Sign Out</span>
              </a>
            </li>
          </ul>
          <!-- End Profile Dropdown Items -->
        </li>
        <!-- End Profile Nav -->
      </ul>
    </nav>
    <!-- End Icons Navigation -->
  </header>
  <!-- End Header -->


  <!-- ======= Sidebar ======= -->
  <aside id="sidebar" class="sidebar">
    <ul class="sidebar-nav" id="sidebar-nav">
      <li class="nav-item">
        <a class="nav-link" href="admindashboard.html">
          <i class="bi bi-grid"></i>
          <span>Dashboard</span>
        </a>
      </li>
      <!-- End Dashboard Nav -->

      <li class="nav-item">
        <a class="nav-link collapsed" data-bs-target="#icons-nav" data-bs-toggle="collapse" href="#">
          <i class="bi bi-gem"></i><span>Users</span><i class="bi bi-chevron-down ms-auto"></i>
        </a>
        <ul id="icons-nav" class="nav-content collapse" data-bs-parent="#sidebar-nav">
          <li>
            <a href="adduser.html">
              <i class="bi bi-circle"></i><span>Add New Users</span>
            </a>
          </li>
          <li>
            <a href="userlist.html">
              <i class="bi bi-circle"></i><span>User List</span>
            </a>
          </li>
          <li>
            <a href="AgentLoginHours.html">
              <i class="bi bi-circle"></i><span>Agent Login Hours</span>
            </a>
          <li>
            <a href="Forcelogout.html">
              <i class="bi bi-circle"></i><span>Force Logout</span>
            </a>
          </li>
        </ul>
      </li>

      <!-- Broadcast Section -->
      <li class="nav-item">
        <a class="nav-link collapsed" data-bs-target="#Broadcast-nav" data-bs-toggle="collapse" href="#">
          <i class="bi bi-broadcast"></i><span>Broadcast</span><i class="bi bi-chevron-down ms-auto"></i>
        </a>
        <ul id="Broadcast-nav" class="nav-content collapse" data-bs-parent="#sidebar-nav">
          <li>
            <a href="broadcast.html">
              <i class="bi bi-circle"></i><span>Add Broadcast</span>
            </a>
          </li>
          <li>
            <a href="Broadcastform.html">
              <i class="bi bi-circle"></i><span>Upload Broadcast</span>
            </a>
          </li>
          <li>
            <a href="broadCastReport.html">
              <i class="bi bi-circle"></i><span>BroadCast Report</span>
            </a>
          </li>
          <li>
            <a href="broadCastSummary.html">
              <i class="bi bi-circle"></i><span>BroadCast Summary</span>
            </a>
          </li>
          <!-- Add more items as needed -->
        </ul>
      </li>

      <!-- campagian Section -->
      <li class="nav-item">
        <a class="nav-link collapsed" data-bs-target="#Campaign-nav" data-bs-toggle="collapse" href="#">
          <i class="bi bi-layout-text-window-reverse"></i><span>Campaign</span><i
            class="bi bi-chevron-down ms-auto"></i>
        </a>
        <ul id="Campaign-nav" class="nav-content collapse" data-bs-parent="#sidebar-nav">

          <li>
            <a href="newcampaign.html">
              <i class="bi bi-circle"></i><span>Add Campaign</span>
            </a>
          </li>

          <li>
            <a href="form.html">
              <i class="bi bi-circle"></i><span>Upload Campaign</span>
            </a>
          </li>
          <!-- Add more items as needed -->
        </ul>
      </li>
      <!-- End Blank Page Nav -->

      <li class="nav-item">
        <a class="nav-link collapsed" href="CallMenu.html">
          <i class="bi bi-telephone-plus"></i>
          <span>Call Menu</span>
        </a>
      </li>
      <!-- End Blank Page Nav -->

      <li class="nav-item">
        <a class="nav-link collapsed" href="AudioStore.html">
          <i class="bi bi-file-earmark-music"></i>
          <span>Audio Store</span>
        </a>
      </li>

      <li class="nav-item">
        <a class="nav-link collapsed" href="DID.html">
          <i class="bi bi-card-list"></i>
          <span>Add/Show DID</span>
        </a>
      </li>

      <li class="nav-item">
        <a class="nav-link collapsed" data-bs-target="#Data-nav" data-bs-toggle="collapse" href="#">
          <i class="bi bi-database-check"></i></i><span>Call Data</span><i class="bi bi-chevron-down ms-auto"></i>
        </a>
        <ul id="Data-nav" class="nav-content collapse" data-bs-parent="#sidebar-nav">

          <li>
            <a href="IncomingCallData.html">
              <i class="bi bi-circle"></i><span>Incoming Call Data</span>
            </a>
          </li>

          <li>
            <a href="OutgoinfCallData.html">
              <i class="bi bi-circle"></i><span>Outgoing Call Data</span>
            </a>
          </li>
          <!-- Add more items as needed -->
        </ul>
      </li>

    </ul>
  </aside>
  <!-- End Sidebar-->

  <main id="main">
    <style>
      body {
        font-family: sans-serif;
      }

      a {
        text-decoration: none;
      }

      h2 {
        color: #000000;
        text-align: center;
      }

      .btn-success {
        background-color: #28a745;
        border-color: #28a745;
      }

      .btn-success:hover {
        background-color: #218838;
        border-color: #1e7e34;
        transform: scale(1.1);
      }

      .modal-content {
        border-radius: 10px;
      }

      .modal-header {
        background-color: #225d97;
        color: #ffffff;
        border-bottom: none;
      }

      .modal-body input,
      .modal-body select {
        margin-bottom: 20px;
        border-radius: 5px;
        border: 1px solid #ced4da;
        height: 40px;
        width: calc(100% - 20px);
        padding: 0 10px;
      }

      .modal-body input:focus,
      .modal-body select:focus {
        box-shadow: 0 0 5px rgba(0, 123, 255, 0.6);
        border-color: #80bdff;
      }

      .modal-footer {
        border-top: none;
      }

      .table th,
      .table td {
        text-align: center;
      }

      .table thead th {
        background-color: #225d97;
        color: #ffffff;
        border-color: #225d97;
      }

      .table tbody tr:hover {
        background-color: #f2f2f2;
      }

      .edit-btn,
      .delete-btn {
        border-radius: 5px;
        margin-right: 10px;
      }

      .btn-sm:hover {
        transform: scale(1.1);
      }

      .notification {
        display: none;
        position: fixed;
        background-color: #225d97;
        font-weight: bold;
        color: white;
        padding: 12px;
        border-radius: 10px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        top: 10%;
        right: 5%;
        max-width: 300px;
        width: 100%;
        text-align: center;
        z-index: 999;
        transition: top 0.3s ease-in-out;
      }

      .show-notification {
        display: block;
        animation: fadeIn 0.5s ease-in-out;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(-10px);
        }

        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      /* Responsive CSS */
      @media screen and (max-width: 768px) {
        .notification {
          font-size: 16px;
          padding: 15px;
        }
      }

      @media screen and (max-width: 480px) {
        .notification {
          font-size: 14px;
          padding: 12px;
        }
      }
    </style>
    <div class="container mt-5">
      <h2>Api Data</h2>
      <!-- Button to trigger modal -->
      <button type="button" class="btn btn-success" data-bs-toggle="modal" data-bs-target="#myModal">
        Add Api
      </button>
      <table class="table table-bordered" id="dataTable">
        <thead>
          <tr>
            <!-- <th>Campaign ID</th> -->
            <th>Time</th>
            <th>Type</th>
            <th>URL</th>
            <th>PayLoad</th>
            <th>Active</th>
            <th>Edit</th>
            <th>Delete</th>

          </tr>
        </thead>
        <tbody id="fileTable">
          <!-- Table rows will be dynamically added here -->
        </tbody>
      </table>

      <div class="notification" id="successMessage">
        <div class="notification-content">
          <p>Api Added Successfully!</p>
        </div>
      </div>


      <div class="notification" id="EditMessage">
        <div class="notification-content">
          <p>Api Edited Successfully!</p>
        </div>
      </div>


      <div class="notification" id="DeleteMessage">
        <div class="notification-content">
          <p>Api Deleted Successfully!</p>
        </div>
      </div>

    </div>

    <!-- Add campaign Modal -->
    <div class="modal fade" id="myModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">New Api</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <form id="addForm">
                <div class="form-group">
                    <label for="ApiTime">ApiTime:</label>
                    <select class="form-control" id="ApiTime" name="ApiTime">
                      <option value="" disabled selected>Select Option</option>
                      <option value="CallStart">CallStart</option>
                      <option value="AgentPopUp">AgentPopUp</option>
                      <option value="CallEnd">CallEnd</option>
                    </select>
                  </div>
                

              <div class="form-group">
                <label for="ApiType">Type:</label>
                <select class="form-control" id="ApiType" name="ApiType">
                  <option value="" disabled selected>Select Option</option>
                  <option value="GET">GET</option>
                  <option value="POST">POST</option>
                </select>
              </div>

              <div class="form-group">
                <label for="ApiURL">ApiURL:</label>
                <textarea type="text" class="form-control" id="ApiURL" name="ApiURL"></textarea>
              </div>
              <div class="form-group">
                <label for="ApiPayload">ApiPayload:</label>
                <textarea type="text" class="form-control" id="ApiPayload" name="ApiPayload"></textarea>
              </div>
              <div class="form-group">
                <label for="Active">Active:</label>
                <select class="form-control" id="Active" name="Active">
                  <option value="true">true</option>
                  <option value="false">false</option>
                </select>
              </div>
             

              <button type="button" class="btn btn-success" id="addRowBtn">
                Submit
              </button>
            </form>
          </div>
        </div>
      </div>
    </div>
    <!--edit Api Model-->
    <div class="modal fade" id="editModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel1">Edit Api</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <form id="editForm">
                <div class="form-group">
                    <label for="ApiTime">ApiTime:</label>
                    <select class="form-control" id="ApiTime1" name="ApiTime1">
                      <option value="" disabled selected>Select Option</option>
                      <option value="CallStart">CallStart</option>
                      <option value="AgentPopUp">AgentPopUp</option>
                      <option value="CallEnd">CallEnd</option>
                    </select>
                  </div>
              
                <div class="form-group">
                    <label for="ApiType1">Type:</label>
                    <select class="form-control" id="ApiType1" name="ApiType1">
                      <option value="" disabled selected>Select Option</option>
                      <option value="GET">GET</option>
                      <option value="POST">POST</option>
                    </select>
                  </div>
                  <div class="form-group">
                    <label for="ApiURL1">ApiURL:</label>
                    <textarea type="text" class="form-control" id="ApiURL1" name="ApiURL1"></textarea>
                  </div>
                  <div class="form-group">
                    <label for="ApiPayload1">ApiPayload:</label>
                    <textarea type="text" class="form-control" id="ApiPayload1" name="ApiPayload1"></textarea>
                  </div>
                  <div class="form-group">
                    <label for="Active1">Active:</label>
                    <select class="form-control" id="Active1" name="Active1">
                      <option value="true">true</option>
                      <option value="false">false</option>
                    </select>
                  </div>

               <button type="button" class="btn btn-success" id="addRowBtn1">
                Submit
              </button>
            </form>
          </div>
        </div>
      </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
      const storedUsername = JSON.parse(localStorage.getItem('admininfo')).user;
      const storedorg = JSON.parse(localStorage.getItem('admininfo')).organization;
      var ApiDetails;
      if (storedUsername) {
        document.getElementById('displayUsername').innerText = storedUsername;
        document.getElementById('displayUsername1').innerText = storedUsername;
        document.getElementById('displayorg').innerText = storedorg;
      } else {
        document.getElementById('displayUsername').innerText = 'No stored username found.';
        document.getElementById('displayUsernam1').innerText = 'No stored username found.';
      }


    
   

      

      document
        .getElementById("addRowBtn")
        .addEventListener("click", async function () {
          // Get input values (including the new call transfer option)
          const ApiType = document.getElementById("ApiType").value;
          const ApiURL = document.getElementById("ApiURL").value;
          const ApiTime =document.getElementById("ApiTime").value;
          const ApiPayload=document.getElementById("ApiPayload").value;
          const Active =document.getElementById("Active").value;

          // Check if all fields are filled
          if (
            ApiType &&
            ApiURL &&
            ApiTime &&
            Active
          ) {
           const isvalidate =validateURL(ApiURL);
           if(isvalidate === false){
            alert("Not a valid URl");
           }else{
          
          
            const ApiData = {
             ApiType:ApiType,
             ApiURL: ApiURL,
             ApiTime:ApiTime,
             ApiPayload:ApiPayload?ApiPayload:null,
             Active:Active
            };
            console.log(ApiData);

            try {
              const response = await fetch("/createApi", {
                method: "POST",
                headers: {
                  "Content-Type": "application/json",
                  'Authorization': `Bearer ${localStorage.getItem('jwtToken')}`
                },
                body: JSON.stringify(ApiData),
              });

              if (response) {
                if (response.status === 401) {
                  // Unauthorized response handling: redirect to index page or handle as needed
                  window.location.href = '/login.html'; // Replace with your index page URL
                }
                else {
                  const result = await response.json();
                  console.log(result);
                  if (result) {
                    if (result.message === "duplicate Api Time") {
                      alert(result.message);
                      Object.keys(ApiData).forEach(
                        (key) => delete ApiData[key]
                      );
                    }
                    else if (
                      result.message ===
                      "database error in saving data to database"
                    ) {
                      alert(result.message);
                      Object.keys(ApiData).forEach(
                        (key) => delete ApiData[key]
                      );
                    }
                    else if (result.message === "Api Added successfully") {
                      $("#myModal").modal("hide");
                      var notification =
                        document.getElementById("successMessage");
                      notification.classList.add("show-notification");

                      setTimeout(function () {
                        notification.classList.remove("show-notification");
                        createdom();
                      }, 1000); // Hide the notification after 5 seconds

                    }
                  }
                }
              } else {
                alert(
                  "failed to add Api due to server error,try after some time"
                );
              }
            } catch (err) {
              console.error("Error:", err);
              alert("Error in app coding data in creating .");
            }
          }
          } else {
            // If not all fields are filled, display an error message
            alert(
              "Please fill out all fields before adding the Api."
            );
          }
        });

      document.addEventListener("DOMContentLoaded", function () {
        createdom();
      });

      async function createdom() {

        fetch("/apiDetails", {
          headers: {
            'Authorization': `Bearer ${localStorage.getItem('jwtToken')}`
          },
        })
          .then((response) => {
            if (response.status === 401) {
              // Unauthorized response handling: redirect to index page or handle as needed
              window.location.href = "/login.html"; // Replace with your index page URL
            } else if (!response.ok) {
              throw new Error("Network response was not ok");
            }
            else {
              return response.json();
            }
          })
          .then((data) => {
            ApiDetails = data.result;
            console.log(ApiDetails);
            refreshTable(ApiDetails);
          })
          .catch((error) => {
            console.error("Error fetching campaign details:", error);
          });
      }

      function refreshTable(file) {
        const audioFiles = file || [];
        console.log(audioFiles);
        var table = document.getElementById("fileTable");
        table.innerHTML = "";

        audioFiles.forEach(function (file, index) {
          const newRow = table.insertRow(table.rows.length);
          const cell1 = newRow.insertCell(0);
          const cell2 = newRow.insertCell(1);
          const cell3 = newRow.insertCell(2);
          const cell4 = newRow.insertCell(3);
          const cell5 = newRow.insertCell(4);
          const cell6 = newRow.insertCell(5);
          const cell7 = newRow.insertCell(6);
          


          // cell1.textContent = file.campaignID || file.campaignid;
          cell1.textContent = file.ApiTime;
          cell2.textContent = file.ApiType;
          cell3.textContent = file.ApiURL;
          cell4.textContent = file.ApiPayload;
          cell5.textContent = file.Active;
          var editButton = document.createElement("button");
          editButton.className = "btn btn-success ";
          editButton.innerHTML = '<i class="bi bi-pencil-square"></i>';
          cell6.appendChild(editButton);

          var deleteButton = document.createElement("button");
          deleteButton.className = "btn btn-danger";
          deleteButton.innerHTML = "<i class='bi bi-trash'></i>";
          cell7.appendChild(deleteButton);

          editButton.addEventListener("click", () => editcallmenu(file, index));
          deleteButton.addEventListener("click", () =>
            deletecallmenu(file, index)
          );
        });
      }

      // Function to delete callmenu from data
      function deletecallmenu(file, index) {
        const confirmation = window.confirm(
          `Do you really want to delete Current ${file.ApiTime} ?`
        );
        if (confirmation) {
          const campaignID = file.ApiTime; // getting callmenu id
          const url = `/ApiData/${campaignID}`;

          // Make a DELETE request to the server
          fetch(url, {
            method: "DELETE",
            headers: {
              "Authorization": `Bearer ${localStorage.getItem('jwtToken')}`
            },
          })
            .then((response) => {
              if (response.status === 401) {
                // Unauthorized response handling: redirect to index page or handle as needed
                window.location.href = "/login.html"; // Replace with your index page URL
              } else if (!response.ok) {
                throw new Error("Failed to delete ");
              }
              else {
                return response.json();
              }
            })
            .then((data) => {
              console.log(data.message); // You can do something with the response from the server if needed

              var notification =
                document.getElementById("DeleteMessage");
              notification.classList.add("show-notification");

              setTimeout(function () {
                notification.classList.remove("show-notification");
                createdom();
              }, 1000);
            })
            .catch((error) => {
              console.error("Error deleting :", error);
            });
        }
      }

      function editcallmenu(file, index) {
        $("#editModal").modal("show");
        let ApiType1 = (document.getElementById("ApiType1").value = file.ApiType);
        let ApiTime1= (document.getElementById("ApiTime1").value = file.ApiTime);
        let ApiURL1 = (document.getElementById("ApiURL1").value = file.ApiURL);
        let ApiPayload1 =(document.getElementById("ApiPayload1").value=file.ApiPayload);
        let Active1 =(document.getElementById("Active1").value =file.Active);
        function handleAddRowBtnClick() {
          const ApiType1 = document.getElementById("ApiType1").value;
          const ApiTime1 = document.getElementById("ApiTime1").value;
          const ApiURL1 = document.getElementById("ApiURL1").value;
          const ApiPayload1 =document.getElementById("ApiPayload1").value;
          const Active1 = document.getElementById("Active1").value;
          
         if(ApiTime1 && ApiType1 && ApiURL1 && Active1){
          // first validate
           const isvalidate= validateURL(ApiURL1)
            if(isvalidate===false){
              alert("Not a valid url");
            }else{
          const newData = {
            ApiType:ApiType1,
            ApiTime:ApiTime1,
            ApiURL:ApiURL1,
            ApiPayload:ApiPayload1?ApiPayload1:null,
            Active : Active1
          };
          console.log(newData);
          const url = `/ApiData/${ApiTime1}`;

          // Make an edit request to the server
          fetch(url, {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
              Authorization: `Bearer ${localStorage.getItem("jwtToken")}`,
            },
            body: JSON.stringify(newData),
          })
            .then((response) => {
              if (response.status === 401) {
                // Unauthorized response handling: redirect to index page or handle as needed
                window.location.href = "/login.html"; // Replace with your index page URL
              } else if (!response.ok) {
                throw new Error("Failed to update Api");
              } else {
                return response.json();
              }
            })
            .then((data) => {
              console.log(data.message); // You can do something with the response from the server if needed
              $("#editModal").modal("hide");

              var notification = document.getElementById("EditMessage");
              notification.classList.add("show-notification");

              setTimeout(function () {
                notification.classList.remove("show-notification");
                createdom();
              }, 1000);

            })
            .catch((error) => {
              console.error("Error Updating:", error);
            });
          }
        }else{
            alert("Enter All Fields");
        }
        }

        // Add event listener to the "Add Row" button
        document.getElementById("addRowBtn1").addEventListener("click", handleAddRowBtnClick);

        // Remove event listener when the modal is hidden
        $("#editModal").on("hidden.bs.modal", function () {
          document.getElementById("addRowBtn1").removeEventListener("click", handleAddRowBtnClick);
        });
      }

      function validateURL(url) {
       // Regular expression to validate URL format
       const urlRegex = /^(https):\/\/[^ "]+$/;

       // Test the URL against the regex
      return urlRegex.test(url);
       }





      function signOut() {
        // Clear localStorage (optional)
        localStorage.removeItem('admininfo');
        localStorage.removeItem('jwtToken');
        localStorage.removeItem('didData');

        // Redirect to the desired location
        window.location.href = '/login.html';
      }
    </script>
  </main>
  <!-- End #main -->

  <!-- ======= Footer ======= -->
  <footer id="footer" class="footer">
    <div class="copyright">
      &copy; Copyright <strong><span>iotcom</span></strong>. All Rights Reserved
    </div>
    <div class="credits">
      Designed by <a href="https://www.iotcom.io/">Iotcom</a>
    </div>
  </footer>
  <!-- End Footer -->

  <a href="#" class="back-to-top d-flex align-items-center justify-content-center"><i
      class="bi bi-arrow-up-short"></i></a>
  <!-- Vendor JS Files -->
  <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

  <!-- Template Main JS File -->
  <script src="assets/js/main.js"></script>
</body>

</html>